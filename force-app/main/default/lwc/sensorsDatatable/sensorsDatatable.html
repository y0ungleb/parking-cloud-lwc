<!-- sldsValidatorIgnore -->
<template>
	<lightning-card title="Parking Sensors State">
		<div class="slds-m-around_medium">
			<lightning-layout horizontal-align="space" class="slds-m-bottom_x-large slds-box">
				<lightning-layout-item flexibility="auto" class="slds-align_absolute-center">
					<lightning-file-upload accept={acceptedCSVFormats} 
													  label="Import CSV" 
													  onuploadfinished={uploadFileHandler}  
													  record-id={recordId}></lightning-file-upload>
				</lightning-layout-item>
				<lightning-layout-item flexibility="auto" class="slds-align_absolute-center">
					<lightning-button variant="brand" 
													title="Export CSV" 
													label="Export CSV" 
													icon-name="utility:download"  
													onclick={downloadFileHandler}></lightning-button>
				</lightning-layout-item>
			</lightning-layout>
			<lightning-datatable key-field="id"
										data={data}
										columns={columns}
										hide-checkbox-column="true"
										onrowaction={onRowActionHandler}
										show-row-number-column="true">
		 </lightning-datatable>
		 <lightning-layout horizontal-align="space" class="slds-m-top_medium slds-box">
			<lightning-layout-item flexibility="auto" class="slds-align_absolute-center"> 
				<lightning-button-group>
					<lightning-button variant="neutral" 
											title="First" 
											label="First" 
											onclick={toFirstHandler} 
											disabled={isPrevFirstDisabled}></lightning-button>
					<lightning-button variant="neutral" 
											title="Last" 
											label="Last" 
											onclick={toLastHandler} 
											disabled={isNextLastDisabled}></lightning-button>
				</lightning-button-group>
			</lightning-layout-item>
			<lightning-layout-item flexibility="auto" class="slds-align_absolute-center">
					<b>Page {page} of {totalPage}</b>
			</lightning-layout-item>
			<lightning-layout-item flexibility="auto" class="slds-align_absolute-center">
				<lightning-combobox label="Records per page"
										  placeholder="Default value: 10"
										  value={comboboxValue}
										  options={comboboxOptions}
										  onchange={comboboxChangeHandler}></lightning-combobox>
		</lightning-layout-item>
			<lightning-layout-item flexibility="auto" class="slds-align_absolute-center">
				<lightning-button-group>
					<lightning-button variant="neutral" 
											title="Prev" 
											label="Prev" 
											icon-name="utility:left" 
											onclick={toPrevHandler} 
											disabled={isPrevFirstDisabled}></lightning-button>
					<lightning-button variant="neutral" 
											title="Next" 
											label="Next" 
											icon-name="utility:right" 
											icon-position="right" 
											onclick={toNextHandler} 
											disabled={isNextLastDisabled}></lightning-button>
				</lightning-button-group>
			</lightning-layout-item>
		</lightning-layout>
		</div>
	</lightning-card>
	<template if:true={showLoadingSpinner}>
		<div style="z-index: 10000 !important;">
			 <lightning-spinner alternative-text="Uploading......" size="medium" style="z-index: 10000 !important;"></lightning-spinner>
		</div>
  </template>
</template>